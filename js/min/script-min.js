$(function(){var s={c1:new Howl({urls:["sounds/c1.mp3"]}),c1s:new Howl({urls:["sounds/c1s.mp3"]}),d1:new Howl({urls:["sounds/d1.mp3"]}),d1s:new Howl({urls:["sounds/d1s.mp3"]}),e1:new Howl({urls:["sounds/e1.mp3"]}),f1:new Howl({urls:["sounds/f1.mp3"]}),f1s:new Howl({urls:["sounds/f1s.mp3"]}),g1:new Howl({urls:["sounds/g1.mp3"]}),g1s:new Howl({urls:["sounds/g1s.mp3"]}),a2:new Howl({urls:["sounds/a2.mp3"]}),a2s:new Howl({urls:["sounds/a2s.mp3"]}),b2:new Howl({urls:["sounds/b2.mp3"]}),c2:new Howl({urls:["sounds/c2.mp3"]}),c2s:new Howl({urls:["sounds/c2s.mp3"]}),d2:new Howl({urls:["sounds/d2.mp3"]}),d2s:new Howl({urls:["sounds/d2s.mp3"]}),e2:new Howl({urls:["sounds/e2.mp3"]}),f2:new Howl({urls:["sounds/f2.mp3"]}),f2s:new Howl({urls:["sounds/f2s.mp3"]}),g2:new Howl({urls:["sounds/g2.mp3"]})};$("[data-embed]").click(function(){var s=$(this);if("vimeo"===s.data("provider"))var e=$('<iframe src="https://player.vimeo.com/video/'+s.data("embed")+'?title=0&byline=0&portrait=0&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');else var e=$('<iframe src="http://www.youtube.com/embed/'+s.data("embed")+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>');return $(".player iframe").replaceWith(e),$("[data-embed]").removeClass("active"),s.addClass("active"),!1}),$(".key-white, .key-black").mousedown(function(){s[$(this).attr("id")].play(),fireANote()}),$(document).on("keyup keydown",function(e){var a="";switch(e.which){case 81:a="c1";break;case 50:a="c1s";break;case 87:a="d1";break;case 51:a="d1s";break;case 69:a="e1";break;case 82:a="f1";break;case 53:a="f1s";break;case 84:a="g1";break;case 54:a="g1s";break;case 89:a="a2";break;case 55:a="a2s";break;case 85:a="b2";break;case 73:a="c2";break;case 57:a="c2s";break;case 79:a="d2";break;case 48:a="d2s";break;case 80:a="e2";break;case 219:a="f2";break;case 187:a="f2s";break;case 221:a="g2"}""!=a&&"email"!==$(e.target).attr("type")&&("keydown"==e.type?(s[a].play(),fireANote(),$("#"+a).addClass("active")):$("#"+a).removeClass("active"))}),$(".button").click(function(){s.c2.play()});var e=["spyglass","strathcona","chinatown","robson-park","library","creekside","nelson","lot-19","aquarium","orpheum","oceanic","woodwards","cathedral","travelling","map"],a=0;if(""!==location.hash){var o=location.hash.replace("#","");e.indexOf(o)>=0?(a=e.indexOf(o),$(".pianos").attr("class","pianos").addClass(o)):setTimeout(function(){o.split(",").forEach(function(e,a){setTimeout(function(){e.split("-").forEach(function(e){s[e].play(),fireANote(),$("#"+e).addClass("active"),setTimeout(function(){$("#"+e).removeClass("active")},250)})},500*a)})},2e3)}$(".previous").click(function(){a=(a+e.length-1)%e.length,$(".pianos").attr("class","pianos").addClass(e[a%e.length])}),$(".next").click(function(){a=(a+1)%e.length,$(".pianos").attr("class","pianos").addClass(e[a%e.length])}),$(".keyboard").click(function(){$(".keys").toggleClass("show-hints")}),$(".location").click(function(s){if("A"!==s.target.tagName){var o=$(this).data("piano");return o&&($(".pianos").attr("class","pianos").addClass(o),a=e.indexOf(o)),!1}}),$(".map-link").click(function(){$(".pianos").attr("class","pianos").addClass("map"),a=e.indexOf("map")})});